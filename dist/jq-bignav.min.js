!function(t){t.fn.bigNav=function(n){var s=t.extend({navButtonClass:"bignav-trigger",navTextOpen:"Open",navTextClose:"Close",subNavTextOpen:"+",subNavTextClose:"-",subtractHeight:0,offsetTop:0,onOpen:function(t){return!1},beforeOnClose:function(t){return!1},onClose:function(t){return!1}},n),e=t(this),i=t("."+s.navButtonClass);i.hasClass("bignav-trigger")||i.addClass("bignav-trigger"),e.hasClass("bignav")||e.addClass("bignav");var o=t("html").css("overflow");return t.extend(e,new function(){var n=this;this.init=function(){return i.removeClass("hidden"),i.html(s.navTextOpen).addClass("bignav-closed"),i.unbind().on("click",function(t){t.preventDefault(),i.hasClass("bignav-closed")?(i.addClass("bignav-open").removeClass("bignav-closed").html(s.navTextClose),n.openClick()):(i.removeClass("bignav-open").addClass("bignav-closed").html(s.navTextOpen),n.closeClick())}),n.subNavs(),setTimeout(function(){e.addClass("hidden")},500),t(document).keyup(function(t){27==t.keyCode&&i.hasClass("bignav-open")&&i.first().click()}),n},this.openClick=function(){return t("body").prepend('<div class="bignav-background" />'),t(".bignav-background").css({height:t(window).height(),width:t(window).width(),background:"white"}),e.removeClass("hidden"),setTimeout(function(){e.addClass("bignav-open"),t(document).trigger("bignav-open")},5),t("html").css({overflow:"hidden","margin-right":n.getScrollBarWidth()+"px"}),t("body").css({position:"fixed","overflow-y":"hidden",width:"100%",height:"100%","-webkit-overflow-scrolling":"touch"}),n.setHeight(),s.onOpen(n.getData()),!1},this.closeClick=function(){return e.addClass("bignav-closing"),s.beforeOnClose(n.getData()),e.removeClass("bignav-open bignav-closing"),t("html").css({overflow:o,"margin-right":0}),t("body").css({position:"static","overflow-y":"auto",width:"auto",height:"auto","-webkit-overflow-scrolling":"touch"}),t(".bignav-background").css({background:"transparent"}),setTimeout(function(){t(".bignav-background").remove()},500),setTimeout(function(){e.addClass("hidden")},500),s.onClose(n.getData()),!1},this.setHeight=function(){var t=s.subtractHeight;if(0!==s.offsetTop&&(e.css({top:s.offsetTop}),t=s.subtractHeight+s.offsetTop),0!==t){e.css({height:"100%"});var n=e.height();e.css({height:n-t+"px"})}return!1},this.subNavs=function(){return e.find("ul.sub-nav, ul.sub-menu").each(function(){var e=t(this);t(this).hasClass("auto-open")||t(this).parent().hasClass("auto-open")?(console.log("hello world"),e.toggleClass("sub-open"),n.showSubNav(e,1,250),e.after('<span class="bignav-sub-open">'+s.subNavTextClose+"</span>")):e.after('<span class="bignav-sub-open">'+s.subNavTextOpen+"</span>"),e.next().on("click",function(){e.toggleClass("sub-open"),e.hasClass("sub-open")?(t(this).html(s.subNavTextClose),n.showSubNav(e,1)):(t(this).html(s.subNavTextOpen),n.showSubNav(e,0))})}),!1},this.showSubNav=function(n,s,e){e=void 0!==e?e:0;var i=n.height(),o=n.parents(".sub-nav");return 1==s&&(o.length>0&&setTimeout(function(){t(o[0]).css({"max-height":t(o[0]).height()+i+"px"})},e),n.hasClass("no-transition")||(n.css({display:"block","max-height":0,transition:"none"}),setTimeout(function(){n.css({"max-height":i+"px",transition:"max-height 0.15s ease-out"})},1))),0==s&&(n.hasClass("no-transition")||(n.css({"max-height":0,transition:"max-height 0.15s ease-in"}),setTimeout(function(){n.css({"max-height":i+"px",display:"none",transition:"none"})},155))),!1},this.getData=function(){return{navHeight:e.height(),scrollBarWidth:n.getScrollBarWidth()}},this.update=function(i){if(void 0!==s)return n.closeClick(),s=t.extend(s,i),e.bigNav(s)},this.getScrollBarWidth=function(){var n=t("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),s=t("<div>").css({width:"100%"}).appendTo(n).outerWidth();return n.remove(),100-s}}),e.init()}}(jQuery);